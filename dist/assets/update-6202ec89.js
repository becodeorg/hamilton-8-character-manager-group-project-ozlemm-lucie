import"./modulepreload-polyfill-3cfb730f.js";import"./main-7fde7c6c.js";function u(){console.log("salut !!!!")}u();const c=new URLSearchParams(window.location.search).get("id"),r=document.querySelector(".input_name_hero_update"),i=document.querySelector(".input_short_description_update"),s=document.querySelector(".input_description_update"),p=document.querySelector(".button_edit"),h=document.querySelector(".uploadImage"),o=document.querySelector(".card_update");let d;h.addEventListener("change",m);p.addEventListener("click",g);f();function m(e){const t=e.target.files;console.log(t),S(t[0])}function g(e){e.preventDefault();const t=r.value,n=i.value,l=s.value,a={name:t,shortDescription:n,image:d,description:l};console.log(a),_(a)}function f(){fetch("https://character-database.becode.xyz/characters").then(e=>e.json()).then(e=>{const t=e.find(n=>n.id===c);t&&y(t)}).catch(e=>{console.error("Error:",e)})}function y(e){r.value=e.name,i.value=e.shortDescription,s.value=e.description;const t=document.createElement("img");t.src="data:image/gif;base64,"+e.image,t.classList.add("image_update");const n=o.querySelector(".image_update");n?o.replaceChild(t,n):o.appendChild(t)}function S(e){if(e.type&&!e.type.startsWith("image/")){console.log("File is not an image.",e.type,e);return}const t=new FileReader;t.addEventListener("load",n=>{d=n.target.result.split(",")[1]}),t.readAsDataURL(e)}function _(e){fetch("https://character-database.becode.xyz/characters/"+c,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>t.json()).then(t=>{console.log("Success:",t),window.location.href="../index.html"}).catch(t=>{console.error("Error:",t)})}
